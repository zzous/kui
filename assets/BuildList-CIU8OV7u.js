import{a1 as O,p as L,s as U,o as $,b as i,g as A,e as T,m as s,w as d,f as e,v as g,u as V,k as j,q as N,r as k,h as E,a2 as R,a3 as P,c as z,y as B,A as I,F as q}from"./index-B-C8b1y1.js";import{c as H,r as S,F as M,a as Y}from"./index-DgE_5hGO.js";const W={class:"ui-section"},G={class:"tbl-reg-wrap"},J={__name:"BuildForm",props:{modelValue:{type:Object,default:{},required:!0},modelModifiers:{}},emits:O(["modalClose"],["update:modelValue"]),setup(w,{expose:D,emit:m}){const{goToPage:b}=L(),p=m,l=U(w,"modelValue"),_=H().shape({projectName:S.create("빌드명").required(),projectDesc:S.create("빌드 내용").required()}),v=async()=>{if(l.value){const{valid:u}=await l.value.validate();return console.log(u),u}},n=async u=>{const c=await v();console.log(c),c&&$Modal.simple({message:`${l.value.values.projectName} 이 빌드 요청이 완료 되었습니다.`,type:"modalAlert",closeButtonHide:!0,className:"confirm",buttonText:{ok:"확인",cancel:"취소"}}).then(r=>{console.log(r),p("modalClose"),b("/buildlist")}).catch(r=>{console.log(r)})};return $(()=>{}),D({editChange:n,validate:v}),(u,c)=>{const r=i("InputText"),f=i("FormLine"),h=i("Textarea");return T(),A("div",null,[s(g(Y),{ref_key:"formRef",ref:l,"validation-schema":g(_),"initial-values":{}},{default:d(({values:o})=>[e("div",W,[e("div",G,[s(f,{labelText:"빌드 명",required:!0},{default:d(()=>[e("div",null,[s(g(M),{name:"projectName"},{default:d(({errors:t,handleChange:a})=>[s(r,{inputPlaceholder:"기업명을 입력하세요.",inputType:"text","model-value":o.projectName,"error-messages":t,"onUpdate:modelValue":a},null,8,["model-value","error-messages","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024),s(f,{labelText:"빌드 내용",required:!0},{default:d(()=>[e("div",null,[s(g(M),{name:"projectDesc"},{default:d(({errors:t,handleChange:a})=>[s(h,{inputPlaceholder:"내용을 입력하세요","model-value":o.projectDesc,"error-messages":t,"onUpdate:modelValue":a},null,8,["model-value","error-messages","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024)])])]),_:1},8,["validation-schema"])])}}},K={class:"item"},Q={class:"input"},X={class:"dv"},Z={class:"item mt-5 w-100",style:{"margin-left":"0"}},ee={class:"item"},te={class:"input"},oe={class:"dv"},ae={class:"item"},le={class:"input"},ne={class:"dv"},de={__name:"BuildList",props:{propsName:{type:Object,default:()=>{}}},emits:[""],setup(w,{emit:D}){const{dayJS:m,goToPage:b}=L();V(),j();const p=N(),l=k({groupname:"",prname:"",pageList:[],pagesize:10,modalType:!1,value:[{headerCheckboxSelection:!0,checkboxSelection:!0,maxWidth:30},{headerName:"서비스 그룹명",field:"groupname",maxWidth:120},{headerName:"프로젝트 명",field:"prname",flex:1,cellRenderer:o=>{const t=`<div id="prname-${o.node.rowIndex}"><a href="javascript:void(0)" class="link">${o.data.prname}</a></div>`,a=document.createElement("div");return a.innerHTML=t,a.querySelector(`#prname-${o.node.rowIndex}`).addEventListener("click",x=>{b("/main/mainview")}),a}},{headerName:"빌드명",field:"prenname",flex:1,suppressSizeToFit:!0},{headerName:"젠킨스 빌드명",field:"prtype",flex:1},{headerName:"등록자",field:"register",flex:1},{headerName:"등록일",field:"date",flex:1},{headerName:"빌드",field:"url",maxWidth:100,cellRenderer:o=>{const t=`<div id="url-${o.node.rowIndex}"><button type="button" class="btn btn-ss">요청</button></div>`,a=document.createElement("div");return a.innerHTML=t,a.querySelector(`#url-${o.node.rowIndex}`).addEventListener("click",x=>{console.log(o.data.url),u()}),a}},{headerName:"이력",field:"view",maxWidth:100,cellRenderer:o=>{const t=`<div id="url-${o.node.rowIndex}"><button type="button" class="btn btn-ss">보기</button></div>`,a=document.createElement("div");return a.innerHTML=t,a}}],rowData:[{groupname:"AlHub",prname:"스프링부트 메이븐 2",prenname:"build-UCA-591",prtype:"build-UCA-591",register:"김용국",url:"",date:"2023.04.12 13:22:14",view:""},{groupname:"AlHub",prname:"스프링부트 메이븐 2",prenname:"build-UCA-591",prtype:"build-UCA-591",register:"김용국",url:"",date:"2023.04.12 13:22:14",view:""},{groupname:"AlHub",prname:"스프링부트 메이븐 2",prenname:"build-UCA-591",prtype:"build-UCA-591",register:"김용국",url:"",date:"2023.04.12 13:22:14",view:""}],defaultColDef:{sortable:!1,filter:!1,resizable:!1,headerClass:"centered",cellClass:"centered",flex:1},dayOpionType:"month",dataChange:!1}),_=N(null),v=(o,t)=>{console.log(m(o).format("YYYY-MM-DD"),m(t).format("YYYY-MM-DD"))},n=k({current:1,currentPageSize:0,size:l.pagesize,offset:E(()=>(n.current-1)*n.size),totalCnt:0}),u=()=>{l.modalType=!0},c=async(o,t)=>{var a;console.log(o,t),o==="modalconfirm"?(a=p.value)==null||a.editChange():l.modalType=!1},r=o=>{n.current=o,l.value[1].valueGetter="node.rowIndex + "+Number(n.size*(n.current-1)+1),getNoticeList()},f=()=>{console.log("등록")},h=()=>{console.log("삭제")};return(o,t)=>{const a=i("DatePicker"),y=i("SearchBox"),x=i("ListTable"),F=i("default-modal");return T(),A(q,null,[s(y,{onOnSearchResult:o.onSearchResult,onOnReload:o.onReload},{formItem:d(()=>[e("div",K,[t[2]||(t[2]=e("label",null,"기간조회",-1)),e("div",Q,[e("div",X,[s(a,{ref_key:"datepicker",ref:_,dayOpionType:l.dayOpionType,onSelectDay:v,optionsType:!0},null,8,["dayOpionType"])])])]),t[7]||(t[7]=e("div",{class:"item"},[e("label",null,"키워드 검색"),e("div",{class:"input"},[e("div",{class:"dv"},[e("input",{type:"text",class:"form-control",placeholder:"키워드를 검색 하세요",style:{width:"360px"}})])])],-1)),e("div",Z,[e("div",ee,[t[4]||(t[4]=e("label",null,"서비스 그룹명",-1)),e("div",te,[e("div",oe,[R(e("select",{class:"custom-select",style:{width:"360px"},placeholder:"서비스 그룹명을 선택 하세요","onUpdate:modelValue":t[0]||(t[0]=C=>l.groupname=C)},t[3]||(t[3]=[e("option",{value:"",disabled:""},"서비스 그룹명을 선택 하세요",-1),e("option",{value:"1"},"1",-1),e("option",{value:"2"},"2",-1),e("option",{value:"3"},"3",-1)]),512),[[P,l.groupname]])])])]),e("div",ae,[t[6]||(t[6]=e("label",null,"프로젝트 명",-1)),e("div",le,[e("div",ne,[R(e("select",{class:"custom-select",style:{width:"360px"},placeholder:"프로젝트 명을 선택 하세요","onUpdate:modelValue":t[1]||(t[1]=C=>l.prname=C)},t[5]||(t[5]=[e("option",{value:"",disabled:""},"프로젝트 명을 선택 하세요",-1),e("option",{value:"1"},"1",-1),e("option",{value:"2"},"2",-1),e("option",{value:"3"},"3",-1)]),512),[[P,l.prname]])])])])])]),_:1},8,["onOnSearchResult","onOnReload"]),s(x,{selected:!0,downLoad:!0,rowData:l.rowData,totalCnt:n.totalCnt,columnDefs:l.value,defaultColDef:l.defaultColDef,domLayout:"autoHeight",cntPerPage:n.size,itemCount:n.totalCnt,currentPage:n.current,downParams:"downParams",regbuttonName:"생성",deletebuttonName:"삭제",onChangedPage:r,onOnRegister:f,onOnDelete:h},null,8,["rowData","totalCnt","columnDefs","defaultColDef","cntPerPage","itemCount","currentPage"]),s(F,{"is-show":l.modalType,"modal-title":"빌드 요청","button-confirm":"확인","button-cancel":"취소","modal-name":"modalAlert",onModalclose:c},{modalcontent:d(()=>[(T(),z(B(I(J)),{ref_key:"buildFormRef",ref:p,onModalClose:c},null,544))]),_:1},8,["is-show"])],64)}}};export{de as default};
